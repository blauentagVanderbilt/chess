<div class="background">
  <div class = "container">
   <!-- UNMATCHED GAMES -->
    <div class="section">
     <h1 class="text-center space">Join A Match</h1>
      <div class="row matches" >
          <% if @unmatched_games.any? %>
            <% @unmatched_games.each do |game| %>
              <div class="row indexgame">
                <span class="column">
                  <h5 class="text-center"><%= "Game #{game.name}" %></h5>
                    <% if game.white_player_id.blank? %>
                      <%= simple_form_for game, url: join_game_path(game) do |f| %>
                        <h6 class="text-center"><%= "Opponent: #{game.black_player_id}" %></h6></span>
                        <%= f.input :white_player_id, :input_html => { :value => current_user.id} %>
                        <%= f.input :turn_user_id, as: :hidden, :input_html => { :value => current_user.id} %>
                        <%= image_tag 'black-pieces.jpg' , class: 'img-fluid' %>
                      <br />
                      <br />
                        <span class="column turn"><%= f.submit "Join as white player", class: "btn btn-secondary" %></span>
                      <% end %>
                  <% else %>
                    <%= simple_form_for game, url: join_game_path(game) do |f| %>
                      <h6 class="text-center"><%= "Opponent: #{game.white_player_id}" %></h6></span>
                      <%= f.input :black_player_id, :input_html => { :value => current_user.id} %>
                      <%= image_tag 'black-pieces.jpg' , class: 'img-fluid' %>
                      <br />
                      <br />
                      <span class="column turn"><%= f.submit "Join as black player", class: "btn btn-secondary" %></span>
                    <% end %>
                  <% end %>
                  <%= link_to "Delete Game", game_path(game), :method => :delete, :class => "delete btn btn-danger", :data => {:confirm => "Are you sure you want to delete this game>"} %>
                </span>
              </div>      
          <% end %>
        <% else %>
          <h3 class="text-center">No Games to join! </h3>
        <% end %>
      </div>
    </div>    
  </div>
    <!--- Started Games --->
  <div class="container">  
    <div class="section">
      <h1 class="text-center space">Your Unfinished Matches</h1>
      <div class="row matches">
        <% if @started_games.any? %>
        <% @started_games.each do |game| %>
          <div class="indexgame">
            <h5 class="text-center"><%= "Game #{game.id}" %></h5>
            <% if current_user.id == game.white_player_id %>
              <h6 class="text-center"><%= "Opponent: #{game.black_player.email}" %></h6>
            <% else %>
              <h6 class="text-center"><%= "Opponent: #{game.white_player.email}" %></h6>
            <% end %>

          <div class="row turn">
            <% if current_user && (current_user.id == game.white_player_id || current_user.id == game.black_player_id)%>
              <% if game.turn_user_id == current_user.id %>
                <%= link_to 'Your Turn!', game_path(game, id: game.id), :class => 'btn btn-success' %>
              <% else %>
                <%= link_to "Your Opponent's Turn", game_path(game, id: game.id), :class => 'btn btn-info' %>
              <% end %>
            <% else %>
              <%= link_to 'Watch Game', game_path(game, id: game.id), :class => 'btn btn-success' %>
            <% end %>
            <%= link_to "Delete", game_path(game), :method => :delete, :class => "btn btn-danger", :data => {:confirm => "Are you sure you want to delete this game?"} %>
            </div>
          <% end %>
        <% else %>
          <h3 class="text-center">No Games in play!</h3>
        <% end %>
      </div>
    </div>
  </div>




</div>
